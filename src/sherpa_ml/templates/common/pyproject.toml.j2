[build-system]
requires = ["setuptools>=69", "wheel"]
build-backend = "setuptools.build_meta"

[project]
# Distribution name (hyphenated); importable package lives under src/<pkg>
name = "{{ repo_name | replace('_', '-') | lower }}"
version = "0.1.0"
description = "Generated by Sherpa-ML (preset={{ preset }}, framework={{ framework }})"
readme = "README.md"
requires-python = ">=3.10"
authors = [{ name = "Your Name" }]
license = { text = "{{ license | replace('\"', '\\\"') }}" }

{# ---------------- Compose dependencies safely (no trailing commas) ---------------- #}
{% set deps = ["rich>=13.7.1"] %}
{% if framework == "pytorch" %}
  {% set _ = deps.append("torch>=2.2.0") %}
{% elif framework == "sklearn" %}
  {% set _ = deps.append("scikit-learn>=1.4.0") %}
{% elif framework == "transformers" %}
  {% set _ = deps.append("transformers>=4.42.0") %}
  {% set _ = deps.append("datasets>=2.20.0") %}
{% endif %}
{% if config_system == "hydra" %}
  {% set _ = deps.append("hydra-core>=1.3.2") %}
{% endif %}
{% if tracking_mlflow %}
  {% set _ = deps.append("mlflow>=2.14.0") %}
{% endif %}

dependencies = [
{%- for d in deps %}
  "{{ d }}"{% if not loop.last %},{% endif %}
{%- endfor %}
]

[tool.setuptools]
package-dir = { "" = "src" }

[tool.setuptools.packages.find]
where = ["src"]
